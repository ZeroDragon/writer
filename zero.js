class Zero{constructor(t,e={}){this.element=document.getElementById(t),this.methods=e.methods||{},this.data=e.data||{},this.getInvolvedElements(),this.setTrackedDisplayItems(),this.bindEvents(),this.updateDom(),e.preload&&e.preload(this)}getInvolvedElements(){var t=[...this.element.querySelectorAll("*")];this.reactiveElements=t.filter(t=>[...t.attributes].some(t=>t.name.startsWith("z-"))),this.triggers=t.filter(t=>[...t.attributes].some(t=>t.name.startsWith("z:")))}bindEvents(){this.triggers.forEach(i=>{[...i.attributes].forEach(t=>{if(t.name.startsWith("z:")){var[,e]=t.name.split(":"),t=t.value,t=this.getValue(t)||t;if(this.methods[t]){for(var s in i._listeners=i._listeners||{},i._listeners)s===e&&i.removeEventListener(s,i._listeners[s]);i._listeners[e]=this.methods[t],i.addEventListener(e,this.methods[t])}}})})}getValue(e){if(e.includes(".")){var s,i=e.split(".");let t=this.data;for(s of i)t=t?.[s];return t}return this.data[e]}setTrackedDisplayItems(){this.trackedDisplays={};for(var t,e=[],s=document.createTreeWalker(this.element,NodeFilter.SHOW_ELEMENT);s.nextNode();)t=s.currentNode,e.push(t);e.forEach(t=>{var e,s=/{{\s*(!?)([\w.]+)\s*}}/g.exec(t.textContent);s&&(e=s[2],t.isWildcard=!!s[1],this.trackedDisplays[e]=t)})}updateDom(n=[]){Object.entries(this.trackedDisplays).forEach(([t,e])=>{t=this.getValue(t);void 0!==t&&(e.isWildcard?"string"!=typeof t?(e.innerHTML="",e.appendChild(t)):e.innerHTML=t:e.textContent=t)}),this.reactiveElements.forEach(t=>{var e=t.getAttribute("z-model");let s=t.getAttribute("z-if");var i,r=t.getAttribute("z-class");if(s&&((a=s.startsWith("!"))&&(s=s.slice(1)),i=this.getValue(s),t.style.display=a?i?"none":"":i?"":"none"),e&&void 0!==this.data[e]){if(n.length&&!n.includes(e))return;if(!["INPUT","TEXTAREA","SELECT"].includes(t.tagName))return void(t.innerHTML=this.data[e]);t.value=this.data[e]}if(r){let s=/{{\s*(!?)([\w.]+)\s*}}/g;var a=r.split(" ").map(t=>t.trim()).map(t=>{var[,,e]=s.exec(t)||[];return e?this.getValue(e):t});t.className=a.join(" ")}})}}